
<%= render "name",  user: @user %>

<%= link_to "いいねした一覧", favorites_user_path(@user) %>

<h5>昨日の自分からのメッセージ</h5>
  <% if @yesterday_post %>
    <p><%= @yesterday_post.message %></p>
  <% else %>
    <p>昨日のメッセージはありません。</p>
  <% end %>
  
<!--送受信したメッセージ一覧　@user = current_user-->
<h5>3日間でもらったメッセージ</h5>
<% grouped_received_messages = @three_days_received_messages.to_a.group_by { |message| message.created_at.to_date } %>
  <% grouped_received_messages.each do |date, messages| %>
    <h5><%= l date, format: :short %></h5>
      <% messages.each do |received_message| %>
        <p>
          <%= received_message.message_text.content %>
           <%= received_message.sender.name %> さんより
        </p>
      <% end %>
<% end %>


<h5>メッセージを送った人</h5>
<% grouped_sent_messages = @user.sent_messages.group_by { |message| message.created_at.to_date } %>
  <% grouped_sent_messages.each do |date, messages| %>
    <h5><%= l date, format: :short %></h5>
    <% messages.each do |sent_message| %>
      <p>
        <%= sent_message.message_text.content %>
        <%= sent_message.receiver.name %> さんに向けて
      </p>
    <% end %>
<% end %>

<!--過去の日記-->
<h5>⚪︎過去の日記たち⚪︎</h5>


<% @posts.each do |post| %>
  <% if post.post_image.attached? %>
    <div class="mood-text">
      <% if post.moods.any? %>
      <h5><%= l post.created_at, format: :short %>の気分</h5>
        <%= render "public/posts/mood", moods: post.moods %>
      <% end %>
    </div>
    <div class="background-image-container">
      <%= image_tag post.get_post_image(700, 400), class: "background-image"  %>
      <div class="overlay-content">
        <h5><%= l post.created_at, format: :long %>の<%= post.user.name %>さんの１行日記</h5>
        <p><%= post.body %></p>
      </div>
    </div>
   <% else %>
    <%= render "public/posts/diary", moods: post.moods, post: post %>
  <% end %>
<% end %>